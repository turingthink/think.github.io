# 第二部分：概率的“规律”——猜数字游戏优化与概率计算（2课时）  


## 课题  
从游戏到数学：计算猜中概率与优化游戏策略  


## 教学时间  
2课时（90分钟）  


## 课前准备  
- **教师端**：电脑（Python 3.10+）、投影仪、概率演示动画（如“大量掷骰子后点数分布”）、“概率计算表”（预设不同范围的猜中概率）。  
- **学生端**：电脑（带前两课时的游戏代码）、计算器、“游戏策略记录表”（记录每次猜测的数字和结果）、小组讨论卡（写有“如何提高猜中率”）。  
- **教学素材**：进阶代码模板（`guess_number_probability.py`）、概率练习题、“策略大师”荣誉证书。  


## 一、导入活动：“猜中概率”大讨论（15分钟）  
## 活动1：“范围与难度”实验  
- 回顾上节课游戏：“猜1-10的数字，猜中概率是多少？”（引导学生得出“1/10”）；  
- 对比提问：“猜1-100的数字，猜中概率是多少？”“为什么范围越大越难猜？”（引出“概率=1/总可能数”）。  

## 活动2：“最优策略”头脑风暴  
- 分组讨论：“如果秘密数字在1-100，第一次猜50，根据反馈再调整，为什么比乱猜更有效？”（引导发现“二分法”缩小范围）。  


## 二、知识点讲解：概率计算与游戏优化（35分钟）  
## 模块1：用Python计算猜中概率（15分钟）  
- **概率公式**：对于范围[a, b]，总可能数 = b - a + 1，单次猜中概率 = 1 / 总可能数。  
- **代码实现概率计算**：  
  ```python
  import random

  # 定义函数：计算猜中概率
  def calc_probability(a, b):
      total = b - a + 1  # 总可能数
      prob = 1 / total   # 单次猜中概率
      return round(prob * 100, 2)  # 转换为百分比，保留2位小数

  # 示例：1-10的概率
  print("1-10的猜中概率：", calc_probability(1, 10), "%")  # 输出：10.0 %

  # 示例：1-100的概率
  print("1-100的猜中概率：", calc_probability(1, 100), "%")  # 输出：1.0 %
  ```  

## 模块2：游戏优化——增加概率提示与策略引导（20分钟）  
- **优化点1：显示概率**：游戏开始时告诉玩家“本次猜中概率是X%”；  
- **优化点2：记录猜测次数**：用变量`count`统计猜了几次，猜对后显示“你用了X次猜中”；  
- **优化点3：策略提示**：若连续两次猜偏，提示“试试中间数缩小范围哦！”。  

- **优化后代码示例**：  
  ```python
  import random

  a, b = 1, 100  # 范围
  secret = random.randint(a, b)
  count = 0  # 猜测次数
  prob = round(100 / (b - a + 1), 2)
  print(f"欢迎猜数字！范围{ a }-{ b }，单次猜中概率{ prob }%")

  while count < 5:  # 最多5次机会
      guess = int(input(f"第{count+1}次猜："))
      count += 1
      if guess > secret:
          print("猜大了！试试更小的数~")
      elif guess < secret:
          print("猜小了！试试更大的数~")
      else:
          print(f"恭喜！你用了{count}次猜中！")
          break
  else:  # 超过次数未猜中
      print(f"挑战失败！秘密数字是{secret}")
  ```  


## 三、练习题设计：概率分析与策略验证（30分钟）  
## 基础任务（全员完成）：“概率对比实验”  
- 要求：分别计算“1-20”“1-50”“1-200”的单次猜中概率，用代码输出对比表，并回答：“范围扩大到原来的5倍，概率变为原来的几分之几？”  
- 参考代码框架：  
  ```python
  def calc_prob(a, b):
      # 补充概率计算逻辑
      pass

  print("范围\t单次概率")
  print(f"1-20\t{calc_prob(1,20)}%")
  # 补充其他范围...
  ```  

## 进阶任务（选做）：“二分法策略”验证  
- 用代码模拟“每次猜中间数”的策略：例如范围1-100，第一次猜50，根据反馈猜25或75，记录平均猜中次数，与乱猜策略对比（是否更少）。  


## 四、讲解与互评：从“计算”到“应用”（10分钟）  
1. **概率分析分享**：选2组展示“范围与概率”对比表，讲解“为什么范围越大概率越小”（结合分数计算）。  
2. **策略辩论**：“二分法一定是最优策略吗？”引导学生发现“当范围是奇数/偶数时，中间数可能有两个，需灵活调整”。  


## 五、总结与作业（10分钟）  
## 课堂总结：  
- 概率是“事件发生的可能性”，猜数字游戏中：概率 = 1 / 总可能数；  
- 优化游戏可从“提示概率”“记录次数”“引导策略”入手，提升体验；  
- 编程不仅能实现游戏，还能计算和验证数学规律（如概率）。  

## 课后作业：  
1. 设计“双人猜数字”游戏：一人输入秘密数字（不告诉计算机），另一人猜，计算机记录次数和概率；  
2. 写一篇“生活中的概率”短文（如彩票中奖概率、天气预报概率），结合本节课知识分析。  


## 教学理论支撑：  
1. **自我决定理论**：通过“设计策略”“验证概率”等自主任务，满足学生的胜任感（“我能计算并应用概率”）和自主性（“我可以优化游戏规则”），增强内在学习动机。  
2. **STEAM教育融合**：深度整合数学（概率计算、分数应用）、技术（编程实现概率函数）、科学（规律验证），让学生理解“编程是解决数学问题的工具”。  
3. **建构主义学习理论**：通过“猜测-验证-优化”的循环，让学生主动建构“概率与范围的关系”“策略与效率的关联”等知识，而非被动接受结论。