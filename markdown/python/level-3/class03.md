# 第一部分：AI对话的秘密——认识AI接口与基础调用  


## 课题  
AI是如何“听懂”问题的？——简易API接口与对话逻辑  


## 教学时间  
2课时（90分钟）  


## 课前准备  
- **教师端**：电脑（Python 3.10+，预装`requests`库）、投影仪、多媒体课件（含AI对话场景视频：如智能音箱问答、客服机器人）、“对话流程图”海报（用户→请求→AI→响应）、预配置的安全版AI接口（如豆包API，限制敏感内容）。  
- **学生端**：电脑（Python环境+`requests`库）、笔记本、“接口调用步骤”手卡（图文版）、小组任务单（记录测试问题与响应）。  
- **教学素材**：API调用基础代码模板、错误排查指南（如“网络连接失败”“参数错误”解决方案）、“AI小助手”创意设计表（记录功能构想）。  


## 一、导入活动：从“人类对话”到“AI对话”（20分钟）  
## 活动1：“你问我答”角色扮演——拆解对话逻辑  
- 分组进行：1人扮演“AI”（只能回答预设问题，如“天气如何”→“今天晴天”），1人扮演“用户”（自由提问）。  
- 提问引导：“当用户问‘没预设的问题’时，‘AI’为什么答不上来？”→引出“AI需要‘规则’（代码）才能回应”。  
- 类比：“人类对话靠‘大脑记忆’，AI对话靠‘代码+数据’，而API就是连接用户和AI的‘电话线’”。  

## 活动2：AI对话实例分析——发现“输入-输出”规律  
- 播放视频：智能音箱回答“1+1等于几”→“等于2”；回答“推荐一本好书”→“《小王子》”。  
- 小组讨论：“用户说的话”（输入）和“AI的回答”（输出）有什么关系？→总结：输入是“问题”，输出是“答案”，AI通过“处理输入”生成输出。  
- 展示“对话流程图”：用户→输入问题→API传递请求→AI计算→API返回答案→用户接收，用箭头标注信息流动方向。  


## 二、知识点讲解：AI接口与Python调用（35分钟）  
## 模块1：什么是API？——连接用户与AI的“桥梁”（10分钟）  
- **比喻解释**：API（应用程序接口）就像“餐厅服务员”——用户（顾客）告诉服务员（API）“想吃什么”（请求），服务员把需求传给厨房（AI系统），再把做好的菜（响应）端给用户。  
- **核心作用**：让我们的Python程序不用自己“思考”，直接“请教”AI大脑（如豆包的模型），快速得到答案。  
- **安全说明**：我们用的是老师提前配置的“儿童友好版API”，只能回答学习相关问题，保护信息安全。  

## 模块2：用Python调用AI接口——发送请求与接收响应（25分钟）  
- **步骤拆解**（结合代码演示，每步对应“服务员”比喻）：  
  1. **“打电话”（导入工具）**：用`requests`库发送网络请求（类似手机拨号）：  
     ```python
     import requests  # 导入“网络电话”工具
     ```  
  2. **“说需求”（设置参数）**：告诉AI问题是什么（类似告诉服务员点什么菜）：  
     ```python
     url = "老师提供的API地址"  # AI的“电话号码”
     question = input("请输入你的问题：")  # 用户的问题（输入）
     params = {
         "prompt": question,  # 明确告诉AI要处理的内容
         "max_tokens": 100    # 限制回答长度（最多100个字）
     }
     ```  
  3. **“等回复”（发送请求）**：通过API把问题传给AI（类似服务员下单）：  
     ```python
     response = requests.get(url, params=params)  # 发送请求
     ```  
  4. **“看答案”（解析响应）**：从AI的回复中提取答案（类似服务员上菜）：  
     ```python
     result = response.json()  # 把AI的回复转成字典（便于提取）
     answer = result["answer"]  # 提取“answer”字段的内容
     print("AI回答：", answer)
     ```  

- **关键规则**：  
  - API地址和参数格式必须严格按照老师提供的模板（如同打电话必须拨对号码）；  
  - 若出现`ConnectionError`，检查网络连接；若出现`KeyError`，检查参数是否正确（如`"answer"`是否拼对）。  


## 三、实践任务：打造“基础问答小助手”（25分钟）  
## 基础任务（全员完成）：“学科小顾问”  
- 目标：调用AI接口，实现“输入数学/科学问题→输出答案”的功能。  
- 代码框架（提供模板，学生填充关键部分）：  
  ```python
  import requests

  # 1. 配置API（老师提供的地址）
  api_url = "______"  # 填写老师给的API地址

  # 2. 获取用户问题
  user_question = input("请问一个数学或科学问题（如‘地球为什么会转’）：")

  # 3. 发送请求给AI
  try:
      response = requests.get(api_url, params={"prompt": user_question})
      # 4. 提取并显示答案
      answer = response.json()["answer"]
      print(f"AI小顾问：{answer}")
  except Exception as e:
      print(f"出错啦：{e}，请检查网络或参数！")
  ```  

## 进阶任务（选做）：“个性化问候”  
- 扩展功能：让AI先问候用户（如“你好！我是你的学科小顾问，有问题问我吧～”），再回答问题。  
- 提示：在`params["prompt"]`中加入问候语，如`f"先问候我，再回答：{user_question}"`。  

## 教师支持：  
- 提供“错误代码对照表”（如`404`→“API地址错了”，`500`→“AI忙，请重试”）；  
- 打开“AI调试小助手”（简化版LangChain工具），学生输入错误信息，AI生成修正建议（如“检查`api_url`是否有空格”）。  


## 四、测试与互评：小助手“体检”（10分钟）  
1. **小组互测**：每组选3个问题（1个数学题、1个科学题、1个趣味题），测试对方的小助手，记录“回答是否准确”“是否有错误”。  
2. **改进建议**：用便利贴写下“你的小助手最棒的地方”和“可以优化的点”（如“希望回答更简洁”“能识别拼音问题就更好了”）。  


## 五、总结与作业（10分钟）  
## 课堂总结：  
- AI对话的核心逻辑：输入问题→API传递→AI处理→输出答案；  
- Python调用API的步骤：导入`requests`→设置参数→发送请求→解析响应；  
- 关键提醒：API参数要准确，遇到错误先查网络和格式。  

## 课后作业：  
1. 完善基础问答小助手，测试5个不同学科的问题，记录“AI回答最棒的一个”（截图或抄录）；  
2. 思考：“如果想让小助手记住我之前问过的问题（比如先问‘什么是质数’，再问‘它有什么用’），需要加什么功能？”（下次课揭晓）。  


## 教学理论支撑：  
1. **维果茨基最近发展区理论**：通过“对话流程图”“代码模板”“错误对照表”搭建脚手架，帮助学生跨越“API抽象概念→实际调用”的认知鸿沟。  
2. **自我决定理论**：允许学生自主选择测试问题（如感兴趣的科学话题），满足自主性需求，增强学习动机。  
3. **STEAM教育融合**：结合技术（API工具）、科学（AI信息处理原理）、工程（系统流程设计），理解AI对话的跨学科本质。  

